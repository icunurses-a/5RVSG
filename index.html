<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Knowledge Comprehensive Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4a6fdc;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            transition: background 0.5s ease;
            overflow-x: hidden;
        }

        .quiz-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .quiz-header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #4a6fdc, #6c757d, #28a745, #dc3545, #ffc107);
            animation: gradient 5s ease infinite;
            background-size: 200% 200%;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .quiz-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .quiz-subtitle {
            font-size: 1.2rem;
            color: var(--secondary-color);
        }

        .progress-container {
            margin-bottom: 30px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .progress {
            height: 25px;
            border-radius: 15px;
            overflow: hidden;
            background-color: #e9ecef;
        }

        .progress-bar {
            background: linear-gradient(90deg, #4a6fdc, #6c757d);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .score-display {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-weight: bold;
        }

        .question-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            position: relative;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .question-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .question-category {
            background: var(--info-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .answer-options {
            margin-bottom: 25px;
        }

        .answer-option {
            display: block;
            width: 100%;
            padding: 15px 20px;
            margin-bottom: 15px;
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 10px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .answer-option:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .answer-option.selected {
            background: #e3f2fd;
            border-color: var(--primary-color);
        }

        .answer-option.correct {
            background: #d4edda;
            border-color: var(--success-color);
            animation: pulse 0.5s ease;
        }

        .answer-option.incorrect {
            background: #f8d7da;
            border-color: var(--danger-color);
            animation: shake 0.5s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .answer-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            display: none;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 500px; }
        }

        .answer-feedback.correct {
            background: #d4edda;
            border: 1px solid var(--success-color);
        }

        .answer-feedback.incorrect {
            background: #f8d7da;
            border: 1px solid var(--danger-color);
        }

        .feedback-emoji {
            font-size: 2rem;
            margin-right: 10px;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-btn.prev {
            background: var(--secondary-color);
            color: white;
        }

        .nav-btn.next {
            background: var(--primary-color);
            color: white;
        }

        .nav-btn.skip {
            background: var(--warning-color);
            color: white;
        }

        .nav-btn.submit {
            background: var(--success-color);
            color: white;
        }

        .avatar-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            z-index: 1000;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .microbiology-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.05;
            pointer-events: none;
        }

        .result-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .result-title {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .result-score {
            font-size: 3rem;
            font-weight: bold;
            margin: 20px 0;
        }

        .result-message {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .result-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .result-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .result-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .result-btn.review {
            background: var(--info-color);
            color: white;
        }

        .result-btn.retake {
            background: var(--primary-color);
            color: white;
        }

        .review-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            display: none;
        }

        .review-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .review-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .review-item {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 10px;
            background: #f8f9fa;
            border-left: 5px solid var(--primary-color);
        }

        .review-question {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .review-answer {
            margin-bottom: 10px;
        }

        .review-correct {
            color: var(--success-color);
            font-weight: bold;
        }

        .review-incorrect {
            color: var(--danger-color);
            font-weight: bold;
        }

        .review-rationale {
            margin-top: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            font-style: italic;
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            display: none;
        }

        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% { transform: translate(0, 0); opacity: 1; }
            100% { transform: translate(var(--x), var(--y)); opacity: 0; }
        }

        .bot-message {
            position: fixed;
            bottom: 100px;
            right: 20px;
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            max-width: 300px;
            display: none;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message-text {
            margin-bottom: 10px;
        }

        .bot-message-close {
            position: absolute;
            top: 5px;
            right: 10px;
            cursor: pointer;
            color: var(--secondary-color);
        }

        @media (max-width: 768px) {
            .quiz-title {
                font-size: 1.8rem;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .nav-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="microbiology-bg">
        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
            <pattern id="bacteria" x="0" y="0" width="200" height="200" patternUnits="userSpaceOnUse">
                <circle cx="50" cy="50" r="20" fill="#4a6fdc" opacity="0.3"/>
                <circle cx="150" cy="150" r="15" fill="#28a745" opacity="0.3"/>
                <circle cx="100" cy="100" r="25" fill="#dc3545" opacity="0.3"/>
                <circle cx="20" cy="180" r="18" fill="#ffc107" opacity="0.3"/>
                <circle cx="180" cy="20" r="22" fill="#17a2b8" opacity="0.3"/>
            </pattern>
            <rect width="100%" height="100%" fill="url(#bacteria)"/>
        </svg>
    </div>

    <div class="quiz-container">
        <header class="quiz-header">
            <h1 class="quiz-title">Medical Knowledge Comprehensive Quiz</h1>
            <p class="quiz-subtitle">Cerebrovascular Disorders, Multiple Sclerosis, Epilepsy & Upper Respiratory Disorders</p>
        </header>

        <div class="progress-container">
            <div class="progress">
                <div class="progress-bar" role="progressbar" style="width: 0%">
                    <span class="progress-percentage">0%</span>
                </div>
            </div>
            <div class="score-display">
                <span>Question: <span id="current-question">1</span> / <span id="total-questions">120</span></span>
                <span>Score: <span id="current-score">0</span></span>
            </div>
        </div>

        <main class="question-container" id="question-container">
            <div class="question-header">
                <span class="question-number" id="question-number">Question 1</span>
                <span class="question-category" id="question-category">Cerebrovascular Disorders</span>
            </div>
            <h2 class="question-text" id="question-text">Loading...</h2>
            <div class="answer-options" id="answer-options">
                <!-- Answer options will be dynamically generated here -->
            </div>
            <div class="answer-feedback" id="answer-feedback">
                <span class="feedback-emoji" id="feedback-emoji"></span>
                <span id="feedback-text"></span>
            </div>
            <div class="navigation-buttons">
                <button class="nav-btn prev" id="prev-btn" disabled>
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button class="nav-btn skip" id="skip-btn">
                    <i class="fas fa-forward"></i> Skip
                </button>
                <button class="nav-btn next" id="next-btn" disabled>
                    Next <i class="fas fa-arrow-right"></i>
                </button>
                <button class="nav-btn submit" id="submit-btn" style="display: none;">
                    <i class="fas fa-check"></i> Submit Quiz
                </button>
            </div>
        </main>

        <div class="result-container" id="result-container">
            <h2 class="result-title">Quiz Complete!</h2>
            <div class="result-score" id="result-score">0/120</div>
            <p class="result-message" id="result-message">Your performance:</p>
            <div class="result-actions">
                <button class="result-btn review" id="review-btn">
                    <i class="fas fa-eye"></i> Review Answers
                </button>
                <button class="result-btn retake" id="retake-btn">
                    <i class="fas fa-redo"></i> Retake Quiz
                </button>
            </div>
        </div>

        <div class="review-container" id="review-container">
            <div class="review-header">
                <h2 class="review-title">Answer Review</h2>
            </div>
            <div id="review-items">
                <!-- Review items will be dynamically generated here -->
            </div>
        </div>
    </div>

    <div class="avatar-container">
        <img src="https://picsum.photos/seed/medical-avatar/80/80.jpg" alt="Medical Assistant" class="avatar-img">
    </div>

    <div class="bot-message" id="bot-message">
        <span class="bot-message-close" id="bot-message-close">&times;</span>
        <div class="bot-message-text" id="bot-message-text"></div>
    </div>

    <div class="celebration" id="celebration"></div>

    <script>
        // Question Database
        const questionsDatabase = {
            "Cerebrovascular Disorders": [
                {
                    question: "What is the most common cause of ischemic stroke?",
                    options: ["Atrial fibrillation", "Atherosclerosis", "Hypertension", "Diabetes"],
                    correct: 1,
                    rationale: "Atherosclerosis is the most common cause of ischemic stroke, accounting for approximately 60-70% of all cases."
                },
                {
                    question: "What is the golden time window for acute ischemic stroke treatment?",
                    options: ["Within 1 hour", "Within 3 hours", "Within 6 hours", "Within 12 hours"],
                    correct: 1,
                    rationale: "The golden time window for acute ischemic stroke treatment is within 3 hours of symptom onset, when thrombolytic therapy is most effective."
                },
                {
                    question: "What is the most common cause of subarachnoid hemorrhage?",
                    options: ["Hypertension", "Aneurysm rupture", "Arteriovenous malformation", "Trauma"],
                    correct: 1,
                    rationale: "Ruptured intracranial aneurysm is the most common cause of subarachnoid hemorrhage, accounting for about 85% of cases."
                },
                {
                    question: "What is the typical duration of symptoms in Transient Ischemic Attack (TIA)?",
                    options: ["Less than 5 minutes", "Less than 24 hours", "Less than 48 hours", "Less than 72 hours"],
                    correct: 1,
                    rationale: "TIA symptoms typically resolve within 24 hours, with most cases resolving within 1 hour."
                },
                {
                    question: "What is the most common location for intracerebral hemorrhage?",
                    options: ["Frontal lobe", "Parietal lobe", "Basal ganglia", "Cerebellum"],
                    correct: 2,
                    rationale: "The basal ganglia is the most common location for intracerebral hemorrhage, accounting for 50-60% of cases."
                },
                {
                    question: "What is the typical CT finding in hypertensive intracerebral hemorrhage?",
                    options: ["Hypodense lesion", "Hyperdense lesion", "Isodense lesion", "Mixed density lesion"],
                    correct: 1,
                    rationale: "Acute hypertensive intracerebral hemorrhage appears as a hyperdense lesion on CT due to the high CT value of fresh blood."
                },
                {
                    question: "At what percentage of carotid stenosis is surgical intervention typically considered?",
                    options: ["50%", "60%", "70%", "80%"],
                    correct: 2,
                    rationale: "Surgical intervention is typically considered when carotid stenosis exceeds 70%, with options including carotid endarterectomy or stenting."
                },
                {
                    question: "What is a common symptom of cerebral venous sinus thrombosis?",
                    options: ["Sudden severe headache", "Progressive headache", "Pulsating headache", "Positional headache"],
                    correct: 1,
                    rationale: "Sudden severe headache is a common symptom of cerebral venous sinus thrombosis, often accompanied by signs of increased intracranial pressure."
                },
                {
                    question: "What is an absolute contraindication for thrombolytic therapy in acute ischemic stroke?",
                    options: ["Age > 80 years", "Recent surgery", "Blood glucose > 22.2 mmol/L", "Platelet count < 100×10^9/L"],
                    correct: 3,
                    rationale: "Platelet count < 100×10^9/L is an absolute contraindication for thrombolytic therapy due to increased bleeding risk."
                },
                {
                    question: "What is the characteristic finding in Moyamoya disease?",
                    options: ["Intraparenchymal hemorrhage", "Ventriculomegaly", "Basal abnormal vascular network", "Brain calcification"],
                    correct: 2,
                    rationale: "Moyamoya disease is characterized by a basal abnormal vascular network that appears as a 'puff of smoke' on angiography."
                },
                {
                    question: "What is the typical presentation of cerebral amyloid angiopathy?",
                    options: ["Deep brain hemorrhage", "Lobar hemorrhage", "Cerebellar hemorrhage", "Brainstem hemorrhage"],
                    correct: 1,
                    rationale: "Cerebral amyloid angiopathy typically presents with lobar hemorrhages, especially in the occipital and temporal lobes."
                },
                {
                    question: "What is a risk factor for cerebral aneurysm rupture?",
                    options: ["Age < 40 years", "Female gender", "Hypotension", "Non-smoker"],
                    correct: 1,
                    rationale: "Female gender is a risk factor for cerebral aneurysm rupture, with higher incidence in women than men."
                },
                {
                    question: "What is the most common clinical presentation of cerebral arteriovenous malformation?",
                    options: ["Seizures", "Headache", "Hemorrhage", "Neurological deficits"],
                    correct: 2,
                    rationale: "Hemorrhage is the most common clinical presentation of cerebral AVM, accounting for about 50% of cases."
                },
                {
                    question: "What is a primary prevention measure for stroke?",
                    options: ["Antiplatelet therapy", "Antihypertensive therapy", "Statin therapy", "All of the above"],
                    correct: 3,
                    rationale: "Antiplatelet therapy, antihypertensive therapy, and statin therapy are all primary prevention measures for stroke."
                },
                {
                    question: "What is a common manifestation of post-stroke depression?",
                    options: ["Low mood", "Loss of interest", "Sleep disturbance", "All of the above"],
                    correct: 3,
                    rationale: "Post-stroke depression commonly presents with low mood, loss of interest, and sleep disturbances."
                },
                {
                    question: "What is a method for assessing post-stroke dysphagia?",
                    options: ["Water swallow test", "Video fluoroscopic swallow study", "Fiberoptic endoscopic swallow study", "All of the above"],
                    correct: 3,
                    rationale: "All these methods are used to assess post-stroke dysphagia, each with specific indications."
                },
                {
                    question: "What is a core principle of stroke rehabilitation?",
                    options: ["Early intervention", "Individualized approach", "Progressive training", "All of the above"],
                    correct: 3,
                    rationale: "Early intervention, individualized approach, and progressive training are all core principles of stroke rehabilitation."
                },
                {
                    question: "What is a common manifestation of post-stroke cognitive impairment?",
                    options: ["Memory impairment", "Attention deficit", "Executive dysfunction", "All of the above"],
                    correct: 3,
                    rationale: "Post-stroke cognitive impairment commonly includes memory impairment, attention deficits, and executive dysfunction."
                },
                {
                    question: "What is a risk factor for post-stroke epilepsy?",
                    options: ["Cortical involvement", "Hemorrhagic stroke", "Large stroke area", "All of the above"],
                    correct: 3,
                    rationale: "Cortical involvement, hemorrhagic stroke, and large stroke area are all risk factors for post-stroke epilepsy."
                },
                {
                    question: "What is a risk factor for stroke recurrence?",
                    options: ["Hypertension", "Diabetes", "Hyperlipidemia", "All of the above"],
                    correct: 3,
                    rationale: "Hypertension, diabetes, and hyperlipidemia are all risk factors for stroke recurrence."
                },
                {
                    question: "What is a common manifestation of post-stroke shoulder-hand syndrome?",
                    options: ["Shoulder pain", "Hand swelling", "Skin changes", "All of the above"],
                    correct: 3,
                    rationale: "Post-stroke shoulder-hand syndrome commonly presents with shoulder pain, hand swelling, and skin changes."
                },
                {
                    question: "What is a treatment for post-stroke spasticity?",
                    options: ["Physical therapy", "Medication", "Botulinum toxin injection", "All of the above"],
                    correct: 3,
                    rationale: "Physical therapy, medication, and botulinum toxin injections are all treatments for post-stroke spasticity."
                },
                {
                    question: "What is an assessment tool for post-stroke aphasia?",
                    options: ["Boston Diagnostic Aphasia Examination", "Western Aphasia Battery", "Chinese Aphasia Battery", "All of the above"],
                    correct: 3,
                    rationale: "All these are established assessment tools for post-stroke aphasia, each with specific applications."
                },
                {
                    question: "What is a common manifestation of post-stroke dysarthria?",
                    options: ["Slurred speech", "Hoarseness", "Abnormal speech rate", "All of the above"],
                    correct: 3,
                    rationale: "Post-stroke dysarthria commonly presents with slurred speech, hoarseness, and abnormal speech rate."
                },
                {
                    question: "What is a risk factor for post-stroke urinary incontinence?",
                    options: ["Older age", "Severe stroke", "Cognitive impairment", "All of the above"],
                    correct: 3,
                    rationale: "Older age, severe stroke, and cognitive impairment are all risk factors for post-stroke urinary incontinence."
                },
                {
                    question: "What is a treatment for post-stroke depression?",
                    options: ["Psychotherapy", "Medication", "Physical therapy", "All of the above"],
                    correct: 3,
                    rationale: "Psychotherapy, medication, and physical therapy can all be components of post-stroke depression treatment."
                },
                {
                    question: "What is a common manifestation of post-stroke sleep disorders?",
                    options: ["Insomnia", "Daytime sleepiness", "Sleep apnea", "All of the above"],
                    correct: 3,
                    rationale: "Post-stroke sleep disorders commonly include insomnia, daytime sleepiness, and sleep apnea."
                },
                {
                    question: "What is a common manifestation of post-stroke fatigue?",
                    options: ["Physical fatigue", "Mental fatigue", "Reduced motivation", "All of the above"],
                    correct: 3,
                    rationale: "Post-stroke fatigue commonly includes physical fatigue, mental fatigue, and reduced motivation."
                },
                {
                    question: "What is a common type of post-stroke pain?",
                    options: ["Central pain", "Shoulder pain", "Headache", "All of the above"],
                    correct: 3,
                    rationale: "Post-stroke pain commonly includes central pain, shoulder pain, and headache."
                }
            ],
            "Multiple Sclerosis and Myasthenia Gravis": [
                {
                    question: "What is the most common initial symptom of Multiple Sclerosis?",
                    options: ["Visual disturbances", "Motor deficits", "Sensory deficits", "Balance problems"],
                    correct: 0,
                    rationale: "Visual disturbances, particularly optic neuritis, are the most common initial symptom of Multiple Sclerosis."
                },
                {
                    question: "What is a typical MRI finding in Multiple Sclerosis?",
                    options: ["Periventricular white matter lesions", "Subcortical white matter lesions", "Brainstem lesions", "All of the above"],
                    correct: 3,
                    rationale: "MS can present with periventricular white matter lesions, subcortical lesions, and brainstem lesions on MRI."
                },
                {
                    question: "What is a definitive diagnostic test for Multiple Sclerosis?",
                    options: ["MRI", "CSF examination", "Evoked potentials", "All of the above"],
                    correct: 3,
                    rationale: "MRI, CSF examination, and evoked potentials are all used in the definitive diagnosis of MS."
                },
                {
                    question: "What is a common clinical course of Multiple Sclerosis?",
                    options: ["Relapsing-remitting", "Secondary progressive", "Primary progressive", "All of the above"],
                    correct: 3,
                    rationale: "MS has several clinical courses including relapsing-remitting, secondary progressive, and primary progressive forms."
                },
                {
                    question: "What is the acute phase treatment for Multiple Sclerosis?",
                    options: ["Corticosteroids", "Beta-interferon", "Glatiramer", "Natalizumab"],
                    correct: 0,
                    rationale: "Corticosteroids are the standard acute phase treatment for MS relapses to reduce inflammation."
                },
                {
                    question: "What is a disease-modifying therapy for Multiple Sclerosis?",
                    options: ["Beta-interferon", "Glatiramer", "Fingolimod", "All of the above"],
                    correct: 3,
                    rationale: "Beta-interferon, glatiramer, and fingolimod are all disease-modifying therapies for MS."
                },
                {
                    question: "What is a common symptom of Multiple Sclerosis?",
                    options: ["Fatigue", "Pain", "Cognitive impairment", "All of the above"],
                    correct: 3,
                    rationale: "MS commonly presents with fatigue, pain, and cognitive impairment among other symptoms."
                },
                {
                    question: "What is a rehabilitation approach for Multiple Sclerosis?",
                    options: ["Physical therapy", "Occupational therapy", "Speech therapy", "All of the above"],
                    correct: 3,
                    rationale: "Physical therapy, occupational therapy, and speech therapy are all important rehabilitation approaches for MS."
                },
                {
                    question: "What is a characteristic clinical feature of Myasthenia Gravis?",
                    options: ["Fluctuating muscle weakness", "Morning improvement, evening worsening", "Worsening with fatigue", "All of the above"],
                    correct: 3,
                    rationale: "MG is characterized by fluctuating muscle weakness that improves in the morning and worsens with fatigue."
                },
                {
                    question: "What is the most common initial symptom of Myasthenia Gravis?",
                    options: ["Ptosis", "Diplopia", "Dysphagia", "Dyspnea"],
                    correct: 0,
                    rationale: "Ptosis (drooping eyelids) is the most common initial symptom of MG, occurring in about 50% of patients."
                },
                {
                    question: "What is a definitive diagnostic test for Myasthenia Gravis?",
                    options: ["Edrophonium test", "Anti-AChR antibody detection", "Repetitive nerve stimulation", "All of the above"],
                    correct: 3,
                    rationale: "All these tests are used in the definitive diagnosis of Myasthenia Gravis."
                },
                {
                    question: "What is the first-line treatment for Myasthenia Gravis?",
                    options: ["Cholinesterase inhibitors", "Corticosteroids", "Immunosuppressants", "Plasmapheresis"],
                    correct: 0,
                    rationale: "Cholinesterase inhibitors are the first-line treatment for MG to improve symptoms."
                },
                {
                    question: "What is a manifestation of Myasthenic Crisis?",
                    options: ["Dyspnea", "Dysphagia", "Respiratory failure", "All of the above"],
                    correct: 3,
                    rationale: "Myasthenic crisis can present with dyspnea, dysphagia, and potentially respiratory failure."
                },
                {
                    question: "What is a treatment for Myasthenic Crisis?",
                    options: ["Intubation", "Mechanical ventilation", "Plasmapheresis", "All of the above"],
                    correct: 3,
                    rationale: "Intubation, mechanical ventilation, and plasmapheresis are all treatments for myasthenic crisis."
                },
                {
                    question: "What is a surgical indication for Myasthenia Gravis?",
                    options: ["Thymoma", "Generalized MG", "Refractory MG", "All of the above"],
                    correct: 3,
                    rationale: "Thymoma, generalized MG, and refractory MG are all indications for surgical intervention in MG."
                },
                {
                    question: "What do Multiple Sclerosis and Myasthenia Gravis have in common?",
                    options: ["Autoimmune disease", "Neuromuscular junction disorder", "Central nervous system disease", "All of the above"],
                    correct: 0,
                    rationale: "Both MS and MG are autoimmune diseases, but MS affects the CNS while MG affects the neuromuscular junction."
                },
                {
                    question: "What is a prognostic factor for Multiple Sclerosis?",
                    options: ["Age of onset", "Initial symptoms", "Initial MRI lesion load", "All of the above"],
                    correct: 3,
                    rationale: "Age of onset, initial symptoms, and initial MRI lesion load are all prognostic factors for MS."
                },
                {
                    question: "What is a prognostic factor for Myasthenia Gravis?",
                    options: ["Age of onset", "Clinical classification", "Treatment response", "All of the above"],
                    correct: 3,
                    rationale: "Age of onset, clinical classification, and treatment response are all prognostic factors for MG."
                },
                {
                    question: "What is a common complication of Multiple Sclerosis?",
                    options: ["Urinary tract infection", "Pressure ulcers", "Depression", "All of the above"],
                    correct: 3,
                    rationale: "MS patients commonly develop UTIs, pressure ulcers, and depression as complications."
                },
                {
                    question: "What is a common complication of Myasthenia Gravis?",
                    options: ["Myasthenic crisis", "Thymoma", "Other autoimmune diseases", "All of the above"],
                    correct: 3,
                    rationale: "MG patients can develop myasthenic crisis, thymoma, and other autoimmune diseases."
                },
                {
                    question: "What is a nursing priority for Multiple Sclerosis?",
                    options: ["Fall prevention", "Skin care", "Psychological support", "All of the above"],
                    correct: 3,
                    rationale: "Fall prevention, skin care, and psychological support are all nursing priorities for MS patients."
                },
                {
                    question: "What is a nursing priority for Myasthenia Gravis?",
                    options: ["Respiratory monitoring", "Nutritional support", "Medication management", "All of the above"],
                    correct: 3,
                    rationale: "Respiratory monitoring, nutritional support, and medication management are all nursing priorities for MG patients."
                },
                {
                    question: "What is patient education content for Multiple Sclerosis?",
                    options: ["Avoid overexertion", "Avoid high temperatures", "Regular medication", "All of the above"],
                    correct: 3,
                    rationale: "All these are important patient education topics for MS management."
                },
                {
                    question: "What is patient education content for Myasthenia Gravis?",
                    options: ["Timely medication", "Avoid infections", "Recognize crisis symptoms", "All of the above"],
                    correct: 3,
                    rationale: "All these are crucial patient education topics for MG management."
                },
                {
                    question: "What is a psychosocial issue in Multiple Sclerosis?",
                    options: ["Anxiety", "Depression", "Social isolation", "All of the above"],
                    correct: 3,
                    rationale: "MS patients commonly face anxiety, depression, and social isolation."
                },
                {
                    question: "What is a psychosocial issue in Myasthenia Gravis?",
                    options: ["Anxiety", "Depression", "Reduced quality of life", "All of the above"],
                    correct: 3,
                    rationale: "MG patients commonly experience anxiety, depression, and reduced quality of life."
                },
                {
                    question: "What is included in MS follow-up?",
                    options: ["Neurological examination", "MRI", "Medication side effect monitoring", "All of the above"],
                    correct: 3,
                    rationale: "All these components are important in MS follow-up care."
                },
                {
                    question: "What is included in MG follow-up?",
                    options: ["Muscle strength assessment", "Medication adjustment", "Thymus examination", "All of the above"],
                    correct: 3,
                    rationale: "All these components are important in MG follow-up care."
                },
                {
                    question: "What is a research advancement in Multiple Sclerosis?",
                    options: ["New drug development", "Biomarker research", "Stem cell therapy", "All of the above"],
                    correct: 3,
                    rationale: "All these areas represent current research advancements in MS."
                },
                {
                    question: "What is a research advancement in Myasthenia Gravis?",
                    options: ["New drug development", "Antibody detection technology", "Immunotherapy", "All of the above"],
                    correct: 3,
                    rationale: "All these areas represent current research advancements in MG."
                }
            ],
            "Seizure Disorders and Epilepsy": [
                {
                    question: "What is the definition of epilepsy?",
                    options: ["Single seizure", "Recurrent seizures", "Status epilepticus", "Epileptic syndrome"],
                    correct: 1,
                    rationale: "Epilepsy is defined as recurrent seizures, typically requiring at least two unprovoked seizures separated by more than 24 hours."
                },
                {
                    question: "What is a common cause of epilepsy?",
                    options: ["Genetic factors", "Head trauma", "Cerebrovascular disease", "All of the above"],
                    correct: 3,
                    rationale: "Epilepsy can be caused by genetic factors, head trauma, cerebrovascular disease, and many other factors."
                },
                {
                    question: "What is a classification of seizures?",
                    options: ["Generalized", "Focal", "Unknown", "All of the above"],
                    correct: 3,
                    rationale: "Seizures are classified as generalized, focal, or unknown based on their onset."
                },
                {
                    question: "What is a common type of generalized seizure?",
                    options: ["Tonic-clonic", "Absence", "Myoclonic", "All of the above"],
                    correct: 3,
                    rationale: "Generalized seizures include tonic-clonic, absence, myoclonic, and other types."
                },
                {
                    question: "What is a common type of focal seizure?",
                    options: ["Simple focal", "Complex focal", "Focal to bilateral tonic-clonic", "All of the above"],
                    correct: 3,
                    rationale: "Focal seizures include simple focal, complex focal, and focal to bilateral tonic-clonic types."
                },
                {
                    question: "What is a definitive diagnostic test for epilepsy?",
                    options: ["EEG", "MRI", "Blood tests", "All of the above"],
                    correct: 3,
                    rationale: "EEG, MRI, and blood tests are all used in the diagnostic workup of epilepsy."
                },
                {
                    question: "What is a characteristic EEG finding in epilepsy?",
                    options: ["Spikes", "Sharp waves", "Spike-and-wave complexes", "All of the above"],
                    correct: 3,
                    rationale: "Epilepsy EEG findings include spikes, sharp waves, and spike-and-wave complexes."
                },
                {
                    question: "What is a first-line treatment for epilepsy?",
                    options: ["Carbamazepine", "Valproic acid", "Levetiracetam", "All of the above"],
                    correct: 3,
                    rationale: "All these are first-line antiepileptic drugs, with choice depending on seizure type."
                },
                {
                    question: "What is the definition of status epilepticus?",
                    options: ["Seizure > 5 minutes", "Seizure > 10 minutes", "Seizure > 30 minutes", "Seizure > 60 minutes"],
                    correct: 2,
                    rationale: "Traditional definition of status epilepticus is seizure lasting >30 minutes, but modern definition has shortened to >5 minutes."
                },
                {
                    question: "What is the first-line treatment for status epilepticus?",
                    options: ["Diazepam", "Lorazepam", "Phenobarbital", "Phenytoin"],
                    correct: 1,
                    rationale: "Lorazepam is the first-line treatment for status epilepticus due to its long duration of action and fewer side effects."
                },
                {
                    question: "What is the definition of drug-resistant epilepsy?",
                    options: ["Failure of 2 AEDs", "Failure of 3 AEDs", "Failure of 4 AEDs", "Failure of 5 AEDs"],
                    correct: 1,
                    rationale: "Drug-resistant epilepsy is defined as failure of two appropriately chosen and tolerated AEDs."
                },
                {
                    question: "What is a treatment for drug-resistant epilepsy?",
                    options: ["New AEDs", "Ketogenic diet", "Surgery", "All of the above"],
                    correct: 3,
                    rationale: "New AEDs, ketogenic diet, and surgery are all treatment options for drug-resistant epilepsy."
                },
                {
                    question: "What is an indication for epilepsy surgery?",
                    options: ["Drug-resistant epilepsy", "Focal epilepsy", "Resectable lesion", "All of the above"],
                    correct: 3,
                    rationale: "All these are indications for epilepsy surgery evaluation."
                },
                {
                    question: "What is a common complication of epilepsy?",
                    options: ["Cognitive impairment", "Psychological problems", "Injuries", "All of the above"],
                    correct: 3,
                    rationale: "Epilepsy can lead to cognitive impairment, psychological problems, and injuries."
                },
                {
                    question: "What is a nursing priority for epilepsy patients?",
                    options: ["Seizure safety", "Medication management", "Psychological support", "All of the above"],
                    correct: 3,
                    rationale: "All these are important nursing priorities for epilepsy patients."
                },
                {
                    question: "What is patient education content for epilepsy?",
                    options: ["Regular medication", "Avoid triggers", "Seizure first aid", "All of the above"],
                    correct: 3,
                    rationale: "All these are essential patient education topics for epilepsy management."
                },
                {
                    question: "What are driving restrictions for epilepsy patients?",
                    options: ["6 months seizure-free", "1 year seizure-free", "2 years seizure-free", "Lifetime ban"],
                    correct: 1,
                    rationale: "Most regions allow driving after 6 months seizure-free, though specific requirements vary by location."
                },
                {
                    question: "What are special considerations for women with epilepsy?",
                    options: ["Contraception", "Pregnancy", "Breastfeeding", "All of the above"],
                    correct: 3,
                    rationale: "All these are special considerations for women with epilepsy."
                },
                {
                    question: "What are special considerations for children with epilepsy?",
                    options: ["Learning difficulties", "Behavioral problems", "Growth and development", "All of the above"],
                    correct: 3,
                    rationale: "All these are special considerations for children with epilepsy."
                },
                {
                    question: "What are special considerations for elderly with epilepsy?",
                    options: ["Drug interactions", "Comorbidities", "Fall risk", "All of the above"],
                    correct: 3,
                    rationale: "All these are special considerations for elderly patients with epilepsy."
                },
                {
                    question: "What is a social issue in epilepsy?",
                    options: ["Employment difficulties", "Educational limitations", "Social stigma", "All of the above"],
                    correct: 3,
                    rationale: "Epilepsy patients face employment difficulties, educational limitations, and social stigma."
                },
                {
                    question: "What is a prognostic factor for epilepsy?",
                    options: ["Etiology", "Seizure type", "Treatment response", "All of the above"],
                    correct: 3,
                    rationale: "All these are prognostic factors for epilepsy outcomes."
                },
                {
                    question: "What is included in epilepsy follow-up?",
                    options: ["Seizure frequency", "Medication side effects", "Quality of life", "All of the above"],
                    correct: 3,
                    rationale: "All these components are important in epilepsy follow-up care."
                },
                {
                    question: "What is a non-pharmacological treatment for epilepsy?",
                    options: ["Ketogenic diet", "Neuromodulation", "Psychotherapy", "All of the above"],
                    correct: 3,
                    rationale: "All these are non-pharmacological treatment options for epilepsy."
                },
                {
                    question: "What is a neuromodulation therapy for epilepsy?",
                    options: ["Vagus nerve stimulation", "Deep brain stimulation", "Responsive neurostimulation", "All of the above"],
                    correct: 3,
                    rationale: "All these are neuromodulation therapies used in epilepsy treatment."
                },
                {
                    question: "What is a research advancement in epilepsy?",
                    options: ["New drug development", "Gene therapy", "Precision medicine", "All of the above"],
                    correct: 3,
                    rationale: "All these represent current research advancements in epilepsy."
                },
                {
                    question: "What is first aid for seizures?",
                    options: ["Protect head", "Prevent injury", "Maintain airway", "All of the above"],
                    correct: 3,
                    rationale: "All these are important components of seizure first aid."
                },
                {
                    question: "What is a common misconception about epilepsy?",
                    options: ["Epilepsy is contagious", "Epilepsy patients cannot marry", "Epilepsy patients cannot work", "All of the above"],
                    correct: 3,
                    rationale: "All these are common misconceptions about epilepsy."
                },
                {
                    question: "What is an international epilepsy organization?",
                    options: ["International League Against Epilepsy", "International Bureau for Epilepsy", "World Health Organization epilepsy program", "All of the above"],
                    correct: 3,
                    rationale: "All these are international organizations involved in epilepsy awareness and care."
                },
                {
                    question: "When is International Epilepsy Day?",
                    options: ["February 14", "June 28", "October 10", "December 1"],
                    correct: 1,
                    rationale: "International Epilepsy Day is celebrated on June 28th to raise awareness about epilepsy."
                }
            ],
            "Upper Respiratory Tract Disorders": [
                {
                    question: "What structures are included in the upper respiratory tract?",
                    options: ["Nasal cavity", "Pharynx", "Larynx", "All of the above"],
                    correct: 3,
                    rationale: "The upper respiratory tract includes the nasal cavity, pharynx, and larynx."
                },
                {
                    question: "What is the most common pathogen in acute upper respiratory infections?",
                    options: ["Viruses", "Bacteria", "Fungi", "All of the above"],
                    correct: 0,
                    rationale: "Viruses are the most common pathogens in acute upper respiratory infections, accounting for 80-90% of cases."
                },
                {
                    question: "What are common symptoms of the common cold?",
                    options: ["Nasal congestion", "Rhinorrhea", "Sore throat", "All of the above"],
                    correct: 3,
                    rationale: "The common cold typically presents with nasal congestion, rhinorrhea, and sore throat."
                },
                {
                    question: "What are common symptoms of acute pharyngitis?",
                    options: ["Sore throat", "Dysphagia", "Fever", "All of the above"],
                    correct: 3,
                    rationale: "Acute pharyngitis commonly presents with sore throat, dysphagia, and fever."
                },
                {
                    question: "What is a common complication of acute tonsillitis?",
                    options: ["Peritonsillar abscess", "Retropharyngeal abscess", "Rheumatic fever", "All of the above"],
                    correct: 3,
                    rationale: "Acute tonsillitis can lead to peritonsillar abscess, retropharyngeal abscess, and rheumatic fever."
                },
                {
                    question: "What are common symptoms of acute laryngitis?",
                    options: ["Hoarseness", "Cough", "Dyspnea", "All of the above"],
                    correct: 3,
                    rationale: "Acute laryngitis commonly presents with hoarseness, cough, and potentially dyspnea."
                },
                {
                    question: "What are common symptoms of acute sinusitis?",
                    options: ["Nasal congestion", "Facial pain", "Purulent nasal discharge", "All of the above"],
                    correct: 3,
                    rationale: "Acute sinusitis typically presents with nasal congestion, facial pain, and purulent nasal discharge."
                },
                {
                    question: "What are common symptoms of acute otitis media?",
                    options: ["Ear pain", "Hearing loss", "Fever", "All of the above"],
                    correct: 3,
                    rationale: "Acute otitis media commonly presents with ear pain, hearing loss, and fever."
                },
                {
                    question: "What are common symptoms of allergic rhinitis?",
                    options: ["Nasal itching", "Sneezing", "Clear rhinorrhea", "All of the above"],
                    correct: 3,
                    rationale: "Allergic rhinitis typically presents with nasal itching, sneezing, and clear rhinorrhea."
                },
                {
                    question: "What are common allergens in allergic rhinitis?",
                    options: ["Pollen", "Dust mites", "Animal dander", "All of the above"],
                    correct: 3,
                    rationale: "Common allergens include pollen, dust mites, and animal dander."
                },
                {
                    question: "What is a treatment for allergic rhinitis?",
                    options: ["Allergen avoidance", "Antihistamines", "Intranasal corticosteroids", "All of the above"],
                    correct: 3,
                    rationale: "All these are effective treatments for allergic rhinitis."
                },
                {
                    question: "What is a preventive measure for acute upper respiratory infections?",
                    options: ["Hand washing", "Avoid contact with patients", "Boost immunity", "All of the above"],
                    correct: 3,
                    rationale: "All these are effective preventive measures for acute upper respiratory infections."
                },
                {
                    question: "What is a complication of acute upper respiratory infections?",
                    options: ["Lower respiratory infection", "Otitis media", "Sinusitis", "All of the above"],
                    correct: 3,
                    rationale: "Acute upper respiratory infections can lead to lower respiratory infections, otitis media, and sinusitis."
                },
                {
                    question: "What is a laboratory test for acute upper respiratory infections?",
                    options: ["Complete blood count", "C-reactive protein", "Viral testing", "All of the above"],
                    correct: 3,
                    rationale: "All these tests can be used in the evaluation of acute upper respiratory infections."
                },
                {
                    question: "What is a treatment principle for acute upper respiratory infections?",
                    options: ["Symptomatic treatment", "Etiological treatment", "Complication prevention", "All of the above"],
                    correct: 3,
                    rationale: "All these are important treatment principles for acute upper respiratory infections."
                },
                {
                    question: "What is a common medication for acute upper respiratory infections?",
                    options: ["Antipyretics/analgesics", "Antihistamines", "Decongestants", "All of the above"],
                    correct: 3,
                    rationale: "All these medications are commonly used for symptomatic relief in acute upper respiratory infections."
                },
                {
                    question: "What is a TCM pattern for acute upper respiratory infections?",
                    options: ["Wind-cold", "Wind-heat", "Summer-heat dampness", "All of the above"],
                    correct: 3,
                    rationale: "TCM classifies acute upper respiratory infections into wind-cold, wind-heat, and summer-heat dampness patterns."
                },
                {
                    question: "What is a TCM treatment for acute upper respiratory infections?",
                    options: ["Release exterior with warm-natured herbs", "Release exterior with cool-natured herbs", "Clear summer-heat and resolve dampness", "All of the above"],
                    correct: 3,
                    rationale: "All these are TCM treatment approaches based on different patterns."
                },
                {
                    question: "What is dietary advice for acute upper respiratory infections?",
                    options: ["Light diet", "Increased fluid intake", "Avoid spicy foods", "All of the above"],
                    correct: 3,
                    rationale: "All these dietary recommendations are beneficial during acute upper respiratory infections."
                },
                {
                    question: "What is rest advice for acute upper respiratory infections?",
                    options: ["Adequate rest", "Avoid overexertion", "Maintain regular schedule", "All of the above"],
                    correct: 3,
                    rationale: "All these rest recommendations are important for recovery from acute upper respiratory infections."
                },
                {
                    question: "Who are special populations for acute upper respiratory infections?",
                    options: ["Children", "Elderly", "Pregnant women", "All of the above"],
                    correct: 3,
                    rationale: "All these groups require special consideration in acute upper respiratory infections."
                },
                {
                    question: "What is characteristic of acute upper respiratory infections in children?",
                    options: ["High incidence", "Prone to complications", "Atypical symptoms", "All of the above"],
                    correct: 3,
                    rationale: "Children have high incidence, are prone to complications, and may present with atypical symptoms."
                },
                {
                    question: "What is characteristic of acute upper respiratory infections in elderly?",
                    options: ["Atypical symptoms", "Prone to complications", "Slow recovery", "All of the above"],
                    correct: 3,
                    rationale: "Elderly patients often have atypical symptoms, are prone to complications, and recover slowly."
                },
                {
                    question: "What is characteristic of acute upper respiratory infections in pregnancy?",
                    options: ["Decreased immunity", "Prone to complications", "Limited medication options", "All of the above"],
                    correct: 3,
                    rationale: "Pregnant women have decreased immunity, are prone to complications, and have limited medication options."
                },
                {
                    question: "What is characteristic of acute upper respiratory infections in chronic disease patients?",
                    options: ["Prone to complications", "Disease exacerbation", "Difficult treatment", "All of the above"],
                    correct: 3,
                    rationale: "Chronic disease patients are prone to complications, may experience disease exacerbation, and treatment can be challenging."
                },
                {
                    question: "What is characteristic of acute upper respiratory infections in immunocompromised patients?",
                    options: ["Prone to complications", "Severe disease", "Slow recovery", "All of the above"],
                    correct: 3,
                    rationale: "Immunocompromised patients are prone to complications, often have severe disease, and recover slowly."
                },
                {
                    question: "What is characteristic of healthcare-associated upper respiratory infections?",
                    options: ["Complex pathogens", "High drug resistance", "Prone to outbreaks", "All of the above"],
                    correct: 3,
                    rationale: "Healthcare-associated infections often involve complex pathogens, have high drug resistance, and can cause outbreaks."
                },
                {
                    question: "What is characteristic of community-acquired upper respiratory infections?",
                    options: ["Relatively simple pathogens", "Low drug resistance", "Seasonal pattern", "All of the above"],
                    correct: 3,
                    rationale: "Community-acquired infections typically have simpler pathogens, lower resistance, and show seasonal patterns."
                },
                {
                    question: "What is an epidemiological feature of acute upper respiratory infections?",
                    options: ["High incidence", "Seasonal pattern", "Easy transmission", "All of the above"],
                    correct: 3,
                    rationale: "Acute upper respiratory infections have high incidence, seasonal patterns, and are easily transmitted."
                },
                {
                    question: "What is a prevention strategy for acute upper respiratory infections?",
                    options: ["Personal protection", "Environmental control", "Vaccination", "All of the above"],
                    correct: 3,
                    rationale: "All these are important components of a comprehensive prevention strategy."
                }
            ]
        };

        // Global Variables
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let shuffledQuestions = [];
        let currentCategory = "";
        let isAnswered = false;
        let reviewMode = false;

        // Initialize Quiz
        function initQuiz() {
            // Randomize question order
            shuffledQuestions = [];
            for (const category in questionsDatabase) {
                const categoryQuestions = [...questionsDatabase[category]];
                // Shuffle questions within each category
                categoryQuestions.sort(() => Math.random() - 0.5);
                shuffledQuestions.push(...categoryQuestions.map(q => ({...q, category})));
            }
            
            // Shuffle all questions
            shuffledQuestions.sort(() => Math.random() - 0.5);
            
            // Initialize user answers array
            userAnswers = new Array(shuffledQuestions.length).fill(null);
            
            // Show first question
            showQuestion(0);
            
            // Update progress bar
            updateProgressBar();
            
            // Show bot message
            showBotMessage("Welcome to the Medical Knowledge Quiz! Let's begin!");
        }

        // Show Question
        function showQuestion(index) {
            if (index < 0 || index >= shuffledQuestions.length) return;
            
            currentQuestionIndex = index;
            isAnswered = false;
            
            const question = shuffledQuestions[index];
            currentCategory = question.category;
            
            // Update question information
            document.getElementById('question-number').textContent = `Question ${index + 1}`;
            document.getElementById('question-category').textContent = question.category;
            document.getElementById('question-text').textContent = question.question;
            
            // Clear answer options
            const answerOptionsContainer = document.getElementById('answer-options');
            answerOptionsContainer.innerHTML = '';
            
            // Randomize answer options
            const shuffledOptions = [...question.options];
            const correctAnswerIndex = question.correct;
            const correctAnswerText = question.options[correctAnswerIndex];
            
            // Create array with options and original indices
            const optionsWithIndex = shuffledOptions.map((option, index) => ({
                text: option,
                originalIndex: index
            }));
            
            // Shuffle options
            optionsWithIndex.sort(() => Math.random() - 0.5);
            
            // Create answer option elements
            optionsWithIndex.forEach((option, index) => {
                const optionElement = document.createElement('button');
                optionElement.className = 'answer-option';
                optionElement.textContent = option.text;
                optionElement.dataset.index = option.originalIndex;
                
                // If question was answered before, show previous selection
                if (userAnswers[currentQuestionIndex] !== null) {
                    if (option.originalIndex === userAnswers[currentQuestionIndex]) {
                        optionElement.classList.add('selected');
                    }
                    if (option.originalIndex === correctAnswerIndex) {
                        optionElement.classList.add('correct');
                    } else if (option.originalIndex === userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex] !== correctAnswerIndex) {
                        optionElement.classList.add('incorrect');
                    }
                    isAnswered = true;
                }
                
                optionElement.addEventListener('click', () => selectAnswer(option.originalIndex));
                answerOptionsContainer.appendChild(optionElement);
            });
            
            // Hide feedback
            document.getElementById('answer-feedback').style.display = 'none';
            
            // Update navigation buttons
            updateNavigationButtons();
            
            // Update current question display
            document.getElementById('current-question').textContent = index + 1;
            
            // Change background color dynamically
            changeBackgroundColor();
        }

        // Select Answer
        function selectAnswer(answerIndex) {
            if (isAnswered) return;
            
            isAnswered = true;
            userAnswers[currentQuestionIndex] = answerIndex;
            
            const question = shuffledQuestions[currentQuestionIndex];
            const isCorrect = answerIndex === question.correct;
            
            // Update answer option styles
            const answerOptions = document.querySelectorAll('.answer-option');
            answerOptions.forEach(option => {
                const optionIndex = parseInt(option.dataset.index);
                if (optionIndex === answerIndex) {
                    option.classList.add('selected');
                }
                if (optionIndex === question.correct) {
                    option.classList.add('correct');
                } else if (optionIndex === answerIndex && !isCorrect) {
                    option.classList.add('incorrect');
                }
            });
            
            // Show feedback
            showFeedback(isCorrect, question.rationale);
            
            // Update score
            if (isCorrect) {
                score++;
                document.getElementById('current-score').textContent = score;
                showCelebration();
            }
            
            // Update navigation buttons
            updateNavigationButtons();
            
            // Show bot message
            if (isCorrect) {
                showBotMessage("Correct! Well done! 👍");
            } else {
                showBotMessage("Incorrect. Keep trying! 😤");
            }
        }

        // Show Feedback
        function showFeedback(isCorrect, rationale) {
            const feedbackElement = document.getElementById('answer-feedback');
            const feedbackEmoji = document.getElementById('feedback-emoji');
            const feedbackText = document.getElementById('feedback-text');
            
            feedbackElement.style.display = 'block';
            
            if (isCorrect) {
                feedbackElement.className = 'answer-feedback correct';
                feedbackEmoji.textContent = '👍';
                feedbackText.textContent = `Correct! ${rationale}`;
            } else {
                feedbackElement.className = 'answer-feedback incorrect';
                feedbackEmoji.textContent = '😤';
                feedbackText.textContent = `Incorrect. ${rationale}`;
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const skipBtn = document.getElementById('skip-btn');
            const submitBtn = document.getElementById('submit-btn');
            
            // Previous button
            prevBtn.disabled = currentQuestionIndex === 0;
            
            // Next button
            if (currentQuestionIndex === shuffledQuestions.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
                submitBtn.disabled = !isAnswered;
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
                nextBtn.disabled = !isAnswered;
            }
            
            // Skip button
            skipBtn.disabled = isAnswered;
        }

        // Update Progress Bar
        function updateProgressBar() {
            const progressBar = document.querySelector('.progress-bar');
            const progressPercentage = document.querySelector('.progress-percentage');
            const percentage = Math.round((currentQuestionIndex / shuffledQuestions.length) * 100);
            
            progressBar.style.width = `${percentage}%`;
            progressPercentage.textContent = `${percentage}%`;
        }

        // Show Celebration Animation
        function showCelebration() {
            const celebrationContainer = document.getElementById('celebration');
            celebrationContainer.innerHTML = '';
            celebrationContainer.style.display = 'block';
            
            // Create firework effect
            for (let i = 0; i < 30; i++) {
                const firework = document.createElement('div');
                firework.className = 'firework';
                firework.style.left = `${Math.random() * 100}%`;
                firework.style.top = `${Math.random() * 100}%`;
                firework.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                firework.style.setProperty('--x', `${(Math.random() - 0.5) * 200}px`);
                firework.style.setProperty('--y', `${(Math.random() - 0.5) * 200}px`);
                celebrationContainer.appendChild(firework);
            }
            
            // Hide celebration after 3 seconds
            setTimeout(() => {
                celebrationContainer.style.display = 'none';
            }, 3000);
        }

        // Show Bot Message
        function showBotMessage(message) {
            const botMessage = document.getElementById('bot-message');
            const botMessageText = document.getElementById('bot-message-text');
            
            botMessageText.textContent = message;
            botMessage.style.display = 'block';
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                botMessage.style.display = 'none';
            }, 5000);
        }

        // Change Background Color Dynamically
        function changeBackgroundColor() {
            const colors = [
                'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)',
                'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
                'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
                'linear-gradient(135deg, #d299c2 0%, #fef9d7 100%)',
                'linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)',
                'linear-gradient(135deg, #fddb92 0%, #d1fdff 100%)',
                'linear-gradient(135deg, #9890e3 0%, #b1f4cf 100%)',
                'linear-gradient(135deg, #ebc0fd 0%, #d9ded8 100%)',
                'linear-gradient(135deg, #96e6a1 0%, #d4fc79 100%)',
                'linear-gradient(135deg, #fdcbf1 0%, #e6dee9 100%)'
            ];
            
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            document.body.style.background = randomColor;
        }

        // Show Results
        function showResults() {
            const questionContainer = document.getElementById('question-container');
            const resultContainer = document.getElementById('result-container');
            const resultScore = document.getElementById('result-score');
            const resultMessage = document.getElementById('result-message');
            
            questionContainer.style.display = 'none';
            resultContainer.style.display = 'block';
            
            resultScore.textContent = `${score}/${shuffledQuestions.length}`;
            
            const percentage = Math.round((score / shuffledQuestions.length) * 100);
            let message = '';
            
            if (percentage >= 90) {
                message = 'Excellent! You have outstanding medical knowledge! 🎉';
            } else if (percentage >= 70) {
                message = 'Good! You have solid medical knowledge! 👍';
            } else if (percentage >= 50) {
                message = 'Pass! You have basic medical knowledge but room for improvement! 😊';
            } else {
                message = 'Need more study! We recommend reviewing medical topics! 💪';
            }
            
            resultMessage.textContent = message;
            
            // Show celebration animation
            if (percentage >= 70) {
                showCelebration();
            }
            
            // Show bot message
            showBotMessage(`Quiz complete! Your score is ${score}/${shuffledQuestions.length}. ${message}`);
        }

        // Show Review
        function showReview() {
            const resultContainer = document.getElementById('result-container');
            const reviewContainer = document.getElementById('review-container');
            const reviewItems = document.getElementById('review-items');
            
            resultContainer.style.display = 'none';
            reviewContainer.style.display = 'block';
            
            reviewItems.innerHTML = '';
            
            shuffledQuestions.forEach((question, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                const userAnswerIndex = userAnswers[index];
                const isCorrect = userAnswerIndex === question.correct;
                
                reviewItem.innerHTML = `
                    <div class="review-question">Question ${index + 1} (${question.category}): ${question.question}</div>
                    <div class="review-answer">Your answer: ${userAnswerIndex !== null ? question.options[userAnswerIndex] : 'Not answered'}</div>
                    <div class="review-correct">Correct answer: ${question.options[question.correct]}</div>
                    <div class="review-rationale">Explanation: ${question.rationale}</div>
                `;
                
                reviewItems.appendChild(reviewItem);
            });
        }

        // Retake Quiz
        function retakeQuiz() {
            score = 0;
            currentQuestionIndex = 0;
            userAnswers = [];
            reviewMode = false;
            
            document.getElementById('current-score').textContent = '0';
            document.getElementById('result-container').style.display = 'none';
            document.getElementById('review-container').style.display = 'none';
            document.getElementById('question-container').style.display = 'block';
            
            initQuiz();
        }

        // Event Listeners
        document.getElementById('prev-btn').addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                showQuestion(currentQuestionIndex - 1);
                updateProgressBar();
            }
        });

        document.getElementById('next-btn').addEventListener('click', () => {
            if (currentQuestionIndex < shuffledQuestions.length - 1) {
                showQuestion(currentQuestionIndex + 1);
                updateProgressBar();
            }
        });

        document.getElementById('skip-btn').addEventListener('click', () => {
            if (currentQuestionIndex < shuffledQuestions.length - 1) {
                showQuestion(currentQuestionIndex + 1);
                updateProgressBar();
            }
        });

        document.getElementById('submit-btn').addEventListener('click', () => {
            showResults();
        });

        document.getElementById('review-btn').addEventListener('click', () => {
            showReview();
        });

        document.getElementById('retake-btn').addEventListener('click', () => {
            retakeQuiz();
        });

        document.getElementById('bot-message-close').addEventListener('click', () => {
            document.getElementById('bot-message').style.display = 'none';
        });

        // Initialize Quiz on Page Load
        window.addEventListener('DOMContentLoaded', () => {
            document.getElementById('total-questions').textContent = '120';
            initQuiz();
        });
    </script>
</body>
</html>